{{ define "message_toggle" }}
<div class="message-toggle" style="margin-bottom: 1rem;">
  <div 
    onclick="this.classList.toggle('expanded')" 
    class="message-container" 
    style="cursor: pointer; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px; font-family: monospace;"
  >
    <!-- Inline view -->
    <div class="message-inline" style="display: flex; gap: 1rem; align-items: baseline;">
      <span style="min-width: 80px;"><strong>{{ .Type }}</strong></span>
      <span style="min-width: 200px; color: #007acc;">{{ .Topic }}</span>
      <span style="min-width: 160px;">
        <a href="/devices/{{ .Sender }}">{{ .Sender }}</a>
      </span>
      <span style="color: #999;">{{ unixTime .Timestamp }}</span>
    </div>

    <!-- Expanded view (initially hidden, shown with .expanded class) -->
    <div class="message-expanded" style="display: none; margin-top: 0.5rem;">
      <div style="font-size: 0.85rem; margin-bottom: 0.25rem;">
        <strong>Payload:</strong>
      </div>
      <pre style="background: #f3f3f3; padding: 0.5rem; border-radius: 4px; overflow-x: auto;">
{{ .Payload | jsonPretty }}
      </pre>
    </div>
  </div>
</div>

<!-- Simple CSS toggle logic -->
<style>
  .message-container.expanded .message-inline {
    display: none;
  }
  .message-container.expanded .message-expanded {
    display: block;
  }
</style>
{{ end }}

{{ define "response" }}
{{ end }}